<div class="section mt-5 bg-neutral-grey p-4">
  <div class="row">
    <div class="col-md-8">
      <h3 class="title">Further Findings</h3>
    </div>
    <div class="col-md-4">
      <select class="msa-form-select ms-md-auto bg-neutral-grey" aria-label="Minimum requirements year filter"
              style="max-width: 120px; max-height: 50px; font-size: 0.8em" [(ngModel)]="year" (change)="updateData()">
        <option [ngValue]="''" selected>all years</option>
        <option [ngValue]="'latest'">latest</option>
        <option [ngValue]="2021">2021</option>
        <option [ngValue]="2020">2020</option>
        <option [ngValue]="2019">2019</option>
        <!--        <option value="2018">2018</option>-->
        <!--        <option value="2017">2017</option>-->
        <!--        <option value="2016">2016</option>-->
      </select>
    </div>
  </div>
  <div class="row mt-3" style="height: 150px" *ngIf="isLoading">
    <div class="col-12 text-center align-self-center">
      <div class="spinner-grow text-warning" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </div>
  <div class="row mt-3 mb-3" [ngClass]="!isLoading ? 'show-element': 'hide-element'">
    <div class="col-md-4 pe-md-2">
      <div class="row">
        <div class="msa-primary-info">{{percentage_of_companies_report_policy_beyond_t1}}%</div>
      </div>
      <div class="row">
        <p>of companies report having a modern slavery <b>policy that applies to stakeholder beyond the 1st tier</b> of
          their supply chain</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="row">
        <div class="msa-primary-info">{{percentage_of_companies_identified_risks}}%</div>
      </div>
      <div class="row">
        <p>of companies have <b>identified risks likely to occur</b> within operations</p>
      </div>
    </div>
    <div class="col-md-4 pe-md-2">
      <div class="row">
        <div class="msa-primary-info">{{percentage_of_companies_identified_incidents}}%</div>
      </div>
      <div class="row">
        <p>of companies have <b>identified a specific incident of modern slavery</b> in their own and/or supply chain
          operations</p>
      </div>
    </div>
  </div>

  <div class="dive-deeper" [ngClass]="!isLoading ? 'show-element': 'hide-element'">
    <div class="row mt-3">
      <div class="accordion" id="approach_to_policies">
        <div class="accordion-item">
          <h2 class="accordion-header" id="approachToPoliciesTitle">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#approach-to-policies" aria-expanded="false" aria-controls="collapseThree">
              <h4>Approach to policies</h4>
            </button>
          </h2>
          <div id="approach-to-policies" class="accordion-collapse collapse" aria-labelledby="approachToPoliciesTitle"
               data-bs-parent="#approach_to_policies">
            <div class="accordion-body">
              <approach-to-policies [year]="this.year"></approach-to-policies>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-3">
      <div class="accordion" id="approach_to_risks_accordion">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              <h4>Approach to risks</h4>
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
               data-bs-parent="#approach_to_risks_accordion">
            <div class="accordion-body">
              <approach-to-risks [year]="this.year"></approach-to-risks>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row mt-3">
      <div class="accordion" id="approach_to_incidents">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingApproachToIncidents">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseApproachToIncidents" aria-expanded="false"
                    aria-controls="collapseApproachToIncidents">
              <h4>Approach to incidents</h4>
            </button>
          </h2>
          <div id="collapseApproachToIncidents" class="accordion-collapse collapse"
               aria-labelledby="headingApproachToIncidents" data-bs-parent="#approach_to_incidents">
            <div class="accordion-body">
              <approach-to-incidents [year]="this.year"></approach-to-incidents>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
